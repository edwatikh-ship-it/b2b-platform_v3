# README — пояснялка (RU, NOT SSoT)

Этот репозиторий сейчас про **контракт**: главный файл — api-contracts.yaml (OpenAPI 3.0). Код может отставать, но контракт — источник правды. [NOT SSoT] [file:40]

---

## Что здесь главное

- api-contracts.yaml — “как система должна отвечать по HTTP”: пути, DTO, статусы, ошибки. [file:40]
- README.md — базовое описание, как это смотреть/править. [file:40]

---

## Как быстро смотреть контракт

### Вариант A (самый удобный): VS Code
1) Открываешь папку проекта в VS Code. [file:40]
2) Ставишь расширение Swagger Viewer. [file:40]
3) Открываешь api-contracts.yaml и включаешь Preview. [file:40]

### Вариант B (когда backend поднят)
Backend обычно отдаёт:
- /docs (Swagger UI)
- /openapi.json (runtime OpenAPI) [file:40]

---

## Как меняем API (правило contract-first)

Любая фича по API делается так:
1) Сначала правим api-contracts.yaml (новый endpoint/поле/статус/ошибка). [file:40]
2) Потом реализуем в backend/frontend так, чтобы совпало. [file:40]

---

## Стабильность и версии

- Версионирование в URL: /api/v1/... [file:40]
- Ошибки приводим к единому формату (ErrorResponse). [file:40]
- Добавлять новые поля в ответы обычно безопасно. [file:40]
- Переименовывать/удалять поля — только через версионирование/депрекацию (иначе ломаем клиентов). [file:40]

---

## Вложения (attachments): как правильно (без бинаря в JSON)

Бинарники не пихаем в JSON.
Типовой поток:
1) POST /user/attachments → получили attachment_id. [file:40]
2) POST /user/requests/{id}/send → передали attachment_ids: [..]. [file:40]

---

## Генерация клиентов (позже)

Когда появится фронт, удобно:
- генерировать типы/клиента из OpenAPI,
- использовать их в UI, чтобы не было рассинхрона полей. [file:40]

---

## Что дальше по проекту (идея, не обещание)

Обычно следующий шаг — каркас backend:
- поднять сервер,
- подключить /api/v1,
- поднять /docs и /openapi.json,
- сверить runtime OpenAPI с api-contracts.yaml,
- сделать первые мок‑эндпоинты. [file:40]